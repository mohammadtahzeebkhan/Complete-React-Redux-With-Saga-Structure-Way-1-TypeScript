{"ast":null,"code":"// userSaga.ts\n\nimport { call, put, takeLatest } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { FETCH_USERS_REQUEST, fetchUserSuccess, fetchUserFailure } from './action';\n\n// Define the response data type you expect from the API\n\n// Define the function that makes the API call\n/* const callApi = async (url: string, method: string): Promise<ApiResponseData> => {\n  try {\n    const response = await axios({\n      method,\n      url,\n      // Add any necessary data or headers here\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n */\nconst callApi = async (url, method, headers, payload) => {\n  try {\n    const config = {\n      method,\n      url,\n      headers: {\n        // Set any default headers here\n        'Content-Type': 'application/json',\n        ...(headers || {}) // Add custom headers if provided\n      },\n\n      data: payload // Include payload in the request if provided\n      // Add any other necessary options here\n    };\n\n    const response = await axios(config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Define the saga function for fetching users\nfunction* fetchUserSaga(action) {\n  //function* fetchUserSaga(action: UserActionTypes) {\n\n  try {\n    const requestData = action.data;\n    const url = `https://jsonplaceholder.typicode.com/users${requestData.url}`;\n    const response = yield call(callApi, url, requestData.method, requestData.header, requestData.payload);\n    console.log(\"userData\", response);\n    // Dispatch a success action with the received data\n    yield put(fetchUserSuccess(response));\n    requestData.handleResponse(response);\n\n    // Optionally, you can call the handleResponse function from the action payload\n    if (requestData.handleResponse) {\n      requestData.handleResponse(response.users);\n    }\n  } catch (error) {\n    // Dispatch a failure action if an error occurs\n    yield put(fetchUserFailure(error.message));\n  }\n}\n\n// Define the root saga\nfunction* userSaga() {\n  // Start the fetchUserSaga when FETCH_USERS_REQUEST action is dispatched\n  yield takeLatest(FETCH_USERS_REQUEST, fetchUserSaga);\n}\nexport default userSaga;","map":{"version":3,"names":["call","put","takeLatest","axios","FETCH_USERS_REQUEST","fetchUserSuccess","fetchUserFailure","callApi","url","method","headers","payload","config","data","response","error","fetchUserSaga","action","requestData","header","console","log","handleResponse","users","message","userSaga"],"sources":["/home/lenovo/Videos/Learning Videos/my youtube video/New Folder/redux-saga-typescript/src/Component/UserPage/saga.ts"],"sourcesContent":["// userSaga.ts\n\nimport { call, put, takeLatest } from 'redux-saga/effects';\nimport axios ,{AxiosRequestConfig}from 'axios';\nimport {\n  FETCH_USERS_REQUEST,\n  fetchUserSuccess,\n  fetchUserFailure,\n  UserActionTypes,\n  User,\n  UserRequestData,\n} from './action';\n\n// Define the response data type you expect from the API\ninterface ApiResponseData {\n  users: any; // Adjust this according to your actual API response structure\n}\n\n// Define the function that makes the API call\n/* const callApi = async (url: string, method: string): Promise<ApiResponseData> => {\n  try {\n    const response = await axios({\n      method,\n      url,\n      // Add any necessary data or headers here\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n */\n\ninterface ApiResponseData {\n  // Define your expected response data structure\n  method:any\n}\nconst callApi = async (url: string,method?: string,headers?: Record<string, string>,payload?: Record<string, any>):Promise<ApiResponseData> => {\n  try {\n    const config: AxiosRequestConfig = {\n      method,\n      url,\n      headers: {\n        // Set any default headers here\n        'Content-Type': 'application/json',\n        ...(headers || {}), // Add custom headers if provided\n      },\n      data: payload, // Include payload in the request if provided\n      // Add any other necessary options here\n    };\n\n    const response = await axios(config);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Define the saga function for fetching users\nfunction* fetchUserSaga(action: any) {\n    //function* fetchUserSaga(action: UserActionTypes) {\n\n  try {\n    \n    const requestData: UserRequestData = action.data;\n    const url = `https://jsonplaceholder.typicode.com/users${requestData.url}`;\n    const response: ApiResponseData = yield call(callApi, url, requestData.method,requestData.header,requestData.payload);\n\n    console.log(\"userData\",response)\n    // Dispatch a success action with the received data\n    yield put(fetchUserSuccess(response));\n    requestData.handleResponse(response)\n\n    // Optionally, you can call the handleResponse function from the action payload\n    if (requestData.handleResponse) {\n      requestData.handleResponse(response.users);\n    }\n  } catch (error:any) {\n    // Dispatch a failure action if an error occurs\n    yield put(fetchUserFailure(error.message));\n  }\n}\n\n// Define the root saga\nfunction* userSaga() {\n  // Start the fetchUserSaga when FETCH_USERS_REQUEST action is dispatched\n  yield takeLatest(FETCH_USERS_REQUEST, fetchUserSaga);\n}\n\nexport default userSaga;\n"],"mappings":"AAAA;;AAEA,SAASA,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAQ,oBAAoB;AAC1D,OAAOC,KAAK,MAA2B,OAAO;AAC9C,SACEC,mBAAmB,EACnBC,gBAAgB,EAChBC,gBAAgB,QAIX,UAAU;;AAEjB;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,MAAMC,OAAO,GAAG,MAAAA,CAAOC,GAAW,EAACC,MAAe,EAACC,OAAgC,EAACC,OAA6B,KAA8B;EAC7I,IAAI;IACF,MAAMC,MAA0B,GAAG;MACjCH,MAAM;MACND,GAAG;MACHE,OAAO,EAAE;QACP;QACA,cAAc,EAAE,kBAAkB;QAClC,IAAIA,OAAO,IAAI,CAAC,CAAC,CAAC,CAAE;MACtB,CAAC;;MACDG,IAAI,EAAEF,OAAO,CAAE;MACf;IACF,CAAC;;IAED,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACS,MAAM,CAAC;IACpC,OAAOE,QAAQ,CAACD,IAAI;EACtB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,UAAUC,aAAaA,CAACC,MAAW,EAAE;EACjC;;EAEF,IAAI;IAEF,MAAMC,WAA4B,GAAGD,MAAM,CAACJ,IAAI;IAChD,MAAML,GAAG,GAAI,6CAA4CU,WAAW,CAACV,GAAI,EAAC;IAC1E,MAAMM,QAAyB,GAAG,MAAMd,IAAI,CAACO,OAAO,EAAEC,GAAG,EAAEU,WAAW,CAACT,MAAM,EAACS,WAAW,CAACC,MAAM,EAACD,WAAW,CAACP,OAAO,CAAC;IAErHS,OAAO,CAACC,GAAG,CAAC,UAAU,EAACP,QAAQ,CAAC;IAChC;IACA,MAAMb,GAAG,CAACI,gBAAgB,CAACS,QAAQ,CAAC,CAAC;IACrCI,WAAW,CAACI,cAAc,CAACR,QAAQ,CAAC;;IAEpC;IACA,IAAII,WAAW,CAACI,cAAc,EAAE;MAC9BJ,WAAW,CAACI,cAAc,CAACR,QAAQ,CAACS,KAAK,CAAC;IAC5C;EACF,CAAC,CAAC,OAAOR,KAAS,EAAE;IAClB;IACA,MAAMd,GAAG,CAACK,gBAAgB,CAACS,KAAK,CAACS,OAAO,CAAC,CAAC;EAC5C;AACF;;AAEA;AACA,UAAUC,QAAQA,CAAA,EAAG;EACnB;EACA,MAAMvB,UAAU,CAACE,mBAAmB,EAAEY,aAAa,CAAC;AACtD;AAEA,eAAeS,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}